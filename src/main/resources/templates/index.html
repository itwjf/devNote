<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>DevNote 博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 先加载 Bootstrap 样式（本地文件） -->
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <!-- 加载 Bootstrap Icons（使用CDN，本地没有此文件） -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- 再加载你的自定义样式（本地文件） -->
    <link th:href="@{/css/style.css}" rel="stylesheet">
</head>
<body>
<div class="container mt-4 mb-8 max-w-4xl mx-auto">
    <!-- 引入导航栏片段 -->
    <div th:replace="~{fragments/navbar :: nav}"></div>
    
    <!-- 网站标题部分 -->
    <div class="mb-8 text-center">
        
        <!-- 用户状态显示 --<div class="flex justify-center">
            <p th:if="${currentUsername}" class="bg-green-50 text-green-700 px-4 py-2 rounded-full text-sm">
                当前登录: <span class="font-medium"><span th:text="${currentUsername}"></span></span>
            </p>
            <p th:unless="${currentUsername}" class="bg-gray-100 text-gray-700 px-4 py-2 rounded-full text-sm">您尚未登录</p>
        </div>
    </div>
        -->
    
    <!-- 最新文章标题 -->
    
    <!-- 文章列表 -->
    <div class="container mt-4">
        <div th:if="${not posts.empty}">
            <div class="row">
                <div class="col-12" th:each="post : ${posts}">
                    <div class="card mb-4 border border-gray-200 shadow-sm rounded-lg hover:shadow-md transition-shadow duration-300">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <h2 class="card-title mb-0"><a th:href="@{/posts/{id}(id=${post.id})}" th:text="${post.title}" class="text-dark hover:text-primary text-decoration-none font-bold"></a></h2>
                                <div>
                                    <span th:if="${post.visibility == 'PUBLIC'}" class="badge bg-primary">公开</span>
                                    <span th:if="${post.visibility == 'FOLLOWERS'}" class="badge bg-info">粉丝可见</span>
                                    <span th:if="${post.visibility == 'PRIVATE'}" class="badge bg-secondary">私密</span>
                                </div>
                            </div>
                            <div class="mb-2 text-muted small">
                                <span>作者: <a th:href="@{'/user/' + ${post.author.username}}" th:text="${post.author.username}" class="text-primary hover:text-primary-dark text-decoration-none font-medium"></a></span>
                                <span class="mx-2">•</span>
                                <span>发布时间: <span th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm:ss')}"></span></span>
                            </div>
                            <p class="card-text text-gray-700 mb-3"><span th:text="${post.content.length() gt 200 ? post.content.substring(0, 200) + '...' : post.content}"></span></p>
                            <a th:href="@{/posts/{id}(id=${post.id})}" class="btn btn-primary btn-sm">阅读全文</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div th:unless="${not posts.empty}" class="alert alert-info">
            暂无文章
        </div>
        <div th:if="${posts}" class="mt-6 mb-2 text-center">
            <p class="text-gray-600 bg-gray-50 py-2 px-4 rounded-lg inline-block">
                共有 <span class="font-semibold text-primary"><span th:text="${posts.size()}"></span></span> 篇文章
            </p>
        </div>
    </div>
    
    <!-- 加载 Bootstrap JavaScript（本地文件） -->
    <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
    
    <!-- 如果有自定义脚本，可以放在这里 -->
    <!-- <script th:src="@{/js/main.js}"></script> -->
</body>
</html>
